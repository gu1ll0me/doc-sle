<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:id="cha-tuning-tuned">
  <title>Adaptive and dynamic tuning using TuneD</title>
  <info>
    <abstract>
      <para>
        TuneD is a powerful dynamic tuning daemon for Linux systems that
        continuously monitors system usage and automatically adjusts system
        settings to optimize performance and resource utilization based on the
        current workload. It offers predefined tuning profiles tailored for
        common use cases such as servers and virtual machines, as well as the
        ability to create custom profiles. TuneD leverages several tuning
        plug-ins that interact with underlying Linux subsystems to tune CPU,
        disk I/O, networking, virtual memory, power management, and other
        components. Its monitoring capabilities allow it to collect data from
        hardware sensors and system metrics to make informed decisions about
        profile switching and dynamic adjustments. By providing a comprehensive
        and automated tuning solution, TuneD enables system administrators to
        achieve optimal system performance without manual, error-prone
        configurations.
      </para>
    </abstract>
    <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
      <dm:bugtracker></dm:bugtracker>
      <dm:translation>yes</dm:translation>
    </dm:docmanager>
  </info>
  <sect1 xml:id="sec-tuning-tuned-introduction">
    <title>Introduction to TuneD</title>

    <para>
      The TuneD application monitors and dynamically adjusts system settings on
      &sles; based on usage of different system resources. The primary goal of
      TuneD is to deliver energy efficiency, optimized performance and
      efficient resource utilization without requiring manual configuration of
      low-level system settings, which can be complex and error-prone.
    </para>

    <para>
      System adminsitrators can apply predefined or customized tuning
      <emphasis>profiles</emphasis> based on the current usage scenario or
      workload on the system. These profiles contain settings for certain
      system components such as the CPU, disk I/O schedulers, virtual memory,
      and power management. The system components are managed by
      <emphasis>plug-ins</emphasis>, which tunes the system based on the
      activated profile settings.
    </para>
  </sect1>
  <sect1 xml:id="sec-tuning-tuned-components">
    <title>Components of TuneD</title>

    <para>
      The TuneD application consists of the following key components:
    </para>

    <variablelist>
      <varlistentry>
        <term>&tuned; daemon</term>
        <listitem>
          <para>
            The core daemon process that runs in the background, monitoring
            system usage and applying tuning settings. It handles profile
            switching and coordination of the other components. The following
            items are associated with the daemon:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                The <command>tuned</command> command that you can use after
                enabling TuneD using <command>systemctl</command>. When invoked
                from the terminal manually, by default <command>tuned</command>
                runs as a normal process. However, you can use the
                <option>--daemon</option> option to run it as a background
                process.
              </para>
            </listitem>
            <listitem>
              <para>
                A <emphasis>tuned</emphasis> systemd service that manages the
                daemon process, such as starting the daemon at boot time,
                stopping/restarting it, and ensuring it runs with the necessary
                permissions and environment.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>tuned-adm</term>
        <listitem>
          <para>
            A command-line utility to manage or administer the &tuned; daemon.
            You can use the <command>tuned-adm</command> command to perform the
            following tasks:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                List all available profiles.
              </para>
            </listitem>
            <listitem>
              <para>
                Display information about the current or specified profile.
              </para>
            </listitem>
            <listitem>
              <para>
                Display the current profile selection mode.
              </para>
            </listitem>
            <listitem>
              <para>
                Recommend a profile based on the current system usage.
              </para>
            </listitem>
            <listitem>
              <para>
                Select a profile automatically, and switch to the recommended
                profile.
              </para>
            </listitem>
            <listitem>
              <para>
                List active profile.
              </para>
            </listitem>
            <listitem>
              <para>
                Manually switch to a specified profile.
              </para>
            </listitem>
            <listitem>
              <para>
                Verify a profile.
              </para>
            </listitem>
            <listitem>
              <para>
                Turn off all tunings.
              </para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Profiles</term>
        <listitem>
          <para>
            A &tuned; <emphasis>profile</emphasis> is a collection of settings
            for system components that you can apply to tune the system. System
            administrators can either use the standard profiles that are
            installed at <filename>/usr/lib/tuned/</filename> as part of the
            <package>tuned</package> package, or apply customized profiles by
            creating them at <filename>/etc/tuned/</filename>. If the filenames
            for a custom and a standard profile matches, the custom profile
            takes precedence when applied.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Plug-ins</term>
        <listitem>
          <para>
            A &tuned; <emphasis>plug-in</emphasis> is an implementation of
            tuning logic for different subsystems. A plug-in is invoked when a
            profile contains a setting that is relevant to the subsystem it
            controls. The plug-in tunes the subsystem based on the value of the
            relevant setting. A few key and most frequently used plug-ins
            manage subsystems such as the CPU, disk, network, virtual machines,
            video and audio. In addition, there are optional monitoring
            plug-ins that monitors certain subsystems and passes on relevant
            information to the daemon for dynamic tuning.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>Profile hooks</term>
        <listitem>
          <para>
            System administrators can extend the ecosystem of &tuned; profiles
            and plug-ins using <emphasis>profile hooks</emphasis>, which are
            custom scripts that can be executed before or after a profile is
            applied. To use a profile hook, specify the path and the type of
            the script in the profile configuration. Such extensibility allows
            implementation of custom tuning logic and offers more control over
            the entire process of applying profiles.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </sect1>
  <sect1 xml:id="sec-tuning-tuned-management">
    <title>Managing TuneD</title>

    <para>
      Lorem Ipsum
    </para>

    <sect2 xml:id="sec-tuning-tuned-installation">
      <title>Installing TuneD</title>
      <para>
        The recommended way to install a supported version of &tuned; is to
        install the <package>tuned</package> package using
        <command>zypper</command>.
      </para>
      <note>
        <para>
          The <package>tuned</package> package is available only in the
          official <emphasis>&sles;</emphasis> repositories. There is no
          equivalent package available in the official &sled; repositories.
        </para>
      </note>
      <procedure>
        <step>
          <para>
            To install the &tuned; daemon, command-line utilities, profiles and
            plug-ins, run the following command:
          </para>
<screen>&prompt.sudo;<command>zypper install -y tuned</command></screen>
        </step>
        <step>
          <para>
            Verify the installation by running the following commands:
          </para>
<screen>&prompt.user;<command>tuned --help</command></screen>
<screen>&prompt.user;<command>tuned-adm --help</command></screen>
        </step>
        <step>
          <para>
            <emphasis>(OPTIONAL)</emphasis> To know more, read the
            <emphasis>man pages</emphasis> for <literal>tuned</literal>,
            <literal>tuned-adm</literal>, <literal>tuned-profiles</literal> and
            <literal>tuned.conf</literal>.
          </para>
        </step>
      </procedure>
    </sect2>

    <sect2 xml:id="sec-tuning-tuned-enable">
      <title>Enabling TuneD</title>
      <para>
        To enable &tuned;, perform the following procedure:
      </para>
      <procedure>
        <step>
          <para>
            Check the status of the &tuned; service:
          </para>
<screen>&prompt.sudo;<command>systemctl status tuned</command></screen>
          <para>
            By default, the status of the service is
            <emphasis>disabled</emphasis>.
          </para>
        </step>
        <step>
          <para>
            To enable a systemd service for future boots so that the &tuned;
            daemon starts automatically at the boot time, run the following
            command:
          </para>
<screen>&prompt.sudo;<command>systemctl enable tuned</command></screen>
          <para>
            However, this command does not starts the &tuned; process. If you
            check the status of the systemd service now, it should be
            <emphasis>enabled</emphasis> and <emphasis>inactive</emphasis>.
          </para>
        </step>
      </procedure>
    </sect2>

    <sect2 xml:id="sec-tuning-tuned-run">
      <title>Running TuneD</title>
      <para>
        After enabling the associated systemd service for &tuned;, for the
        current session you can start running &tuned; either as a background
        daemon or as a normal process connected to the TTY.
      </para>
      <para>
        Alternatively, you can enable the associated systemd service and start
        running the daemon simultaneously.
      </para>
      <procedure>
        <step>
          <para>
            To start &tuned; only for the current session, perform one of the
            following steps:
          </para>
          <itemizedlist>
            <listitem>
              <para>
                Start &tuned; as a background process and let systemd manage
                the lifecycle of the daemon:
              </para>
<screen>&prompt.sudo;<command>systemctl start tuned</command></screen>
              <note>
                <para>
                  Once activated, &tuned; starts tuning the system based on the
                  default profile that is appropriate for the system, or the
                  currently active profile. To change it, use the
                  <command>tuned-adm</command> command. For more information,
                  see the sections
                  <xref linkend="sec-tuning-tuned-profiles"></xref> and
                  <xref linkend="sec-tuning-tuned-plugins"></xref>.
                </para>
              </note>
            </listitem>
            <listitem>
              <para>
                Start &tuned; as a normal process connected to the TTY only for
                the current session:
              </para>
<screen>&prompt.sudo;<command>tuned</command></screen>
              <tip>
                <para>
                  You can use this command to activate a profile, or even run
                  it as a daemon. For more information, run the <command>tuned
                  -help</command> command.
                </para>
              </tip>
            </listitem>
          </itemizedlist>
        </step>
        <step>
          <para>
            <emphasis>ALTERNATIVELY</emphasis>, to enable a systemd service for
            future boots and simultaneously start the &tuned; daemon in the
            current session, run the following command:
          </para>
<screen>&prompt.sudo;<command>systemctl enable --now tuned</command></screen>
        </step>
      </procedure>
    </sect2>

    <sect2 xml:id="sec-tuning-tuned-disable">
      <title>Disabling TuneD</title>
      <para>
        As a best practice, perform the following steps to disable &tuned;:
      </para>
      <procedure>
        <step>
          <para>
            Check the status of the &tuned; systedmd service:
          </para>
<screen>&prompt.sudo;<command>systemctl status tuned</command></screen>
        </step>
        <step>
          <para>
            Turn off or disable all tunings settings applied earlier:
          </para>
<screen>&prompt.sudo;<command>tuned-adm off</command></screen>
        </step>
        <step>
          <para>
            If the status of the &tuned; daemon is <emphasis>active</emphasis>,
            stop the daemon:
          </para>
<screen>&prompt.sudo;<command>systemctl stop tuned</command></screen>
        </step>
        <step>
          <para>
            To stop the &tuned; daemon from being automatically activated
            during the next boot, disable the associated systemd service:
          </para>
<screen>&prompt.sudo;<command>systemctl disable tuned</command></screen>
          <para>
            <emphasis>ALTERNATIVELY</emphasis>, you can simultaneously disable
            the &tuned; systemd service and stop the &tuned; daemon
            immediately:
          </para>
<screen>&prompt.sudo;<command>systemctl disable --now tuned</command></screen>
        </step>
      </procedure>
    </sect2>
  </sect1>
  <sect1 xml:id="sec-tuning-tuned-profiles">
    <title>TuneD profiles</title>

    <warning>
      <para>
        &suse; does not support any profile that are not part of the standard
        profiles supplied with the <package>tuned</package> from official
        &sles; repositories. Create and apply a custom profile on a production
        system only if you are sure of its effect.
      </para>
    </warning>

    <sect2>
      <title></title>
      <para></para>
    </sect2>
  </sect1>
  <sect1 xml:id="sec-tuning-tuned-plugins">
    <title>TuneD plug-ins</title>

    <para>
      Lorem Ipsum
    </para>

    <sect2 xml:id="sec-tuning-profile-hooks">
      <title>Extending TuneD plug-ins</title>
      <para>
        Lorem Ipsum
      </para>
    </sect2>
  </sect1>
  <sect1 xml:id="sec-tuning-tuned-more">
    <title>More information</title>

    <para>
      For more information, refer to the following resources:
    </para>

    <itemizedlist>
      <listitem>
        <para>
          The official website of the TuneD project:
          <link xlink:href="https://tuned-project.org/"></link>
        </para>
      </listitem>
      <listitem>
        <para>
          Source code repository on GitHub:
          <link
          xlink:href="https://github.com/redhat-performance/tuned"></link>.
          You may find the following resources to be particularly helpful:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              Configuration files for several profiles are available at
              <link
              xlink:href="https://github.com/redhat-performance/tuned/tree/master/profiles"></link>.
              These configuration examples can provide good starting point for
              creating a custom profile that is not available as part of the
              <package>tuned</package> package for &sles;.
            </para>
          </listitem>
          <listitem>
            <para>
              If you are interested in the implementation of the plug-ins that
              monitors and dynamically tunes the system based on values
              provided in the profiles, the source code is available at
              <link xlink:href="https://github.com/redhat-performance/tuned/tree/master/tuned/plugins"></link>.
            </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </sect1>
</chapter>
